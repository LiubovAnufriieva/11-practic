(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const c="http://localhost:3000/todos",d=document.querySelector(".todo__form"),i=document.querySelector(".list");d.addEventListener("submit",f);i.addEventListener("click",h);i.addEventListener("click",p);async function a(t,r={}){const e=await fetch(t,r);if(!e.ok)throw new Error(e.statusText);return await e.json()}a(c).then(t=>i.insertAdjacentHTML("beforeend",u(t))).catch(t=>console.log(t));function u(t){return t.map(({id:r,title:e,completed:n})=>`
        <li data-id="${r}" class="list__item">
            <input type="checkbox" class="list__checkbox" ${n&&"checked"}>
            <h2 class="list__title">${e}</h2>
            <button class="list__btn">x</button>
        </li>
    `).join("")}function f(t){t.preventDefault();const{todo:r}=t.currentTarget.elements;a(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r.value,completed:!1})}).then(e=>i.insertAdjacentHTML("beforeend",u([e]))).catch(e=>alert(e)).finally(()=>d.reset())}function h(t){if(!t.target.classList.contains("list__checkbox"))return;t.preventDefault();const e=t.target.closest(".list__item").dataset.id;a(`${c}/${e}`,{method:"PATCH",body:JSON.stringify({completed:t.target.checked})}).then(n=>t.target.checked=n.completed).catch(n=>console.log(n))}function p(t){if(!t.target.classList.contains("list__btn"))return;const r=t.target.closest(".list__item"),e=r.dataset.id;a(`${c}/${e}`,{method:"DELETE"}).then(n=>r.remove()).catch(n=>alert(n))}
//# sourceMappingURL=commonHelpers.js.map
