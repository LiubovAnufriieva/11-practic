{"version":3,"file":"commonHelpers2.js","sources":["../src/main.js"],"sourcesContent":["import \"./css/styles.css\"\n\nconst BASE_URL = \"http://localhost:3000/todos\"\n\nconst form = document.querySelector(\".todo__form\");\nconst container = document.querySelector(\".list\");\n\nform.addEventListener(\"submit\", handleSubmit);\ncontainer.addEventListener(\"click\", handleUpdate);\ncontainer.addEventListener(\"click\", handleDelete);\n\n\nasync function fetchData(url, options = {}) {\n    const response = await fetch(url, options);\n    if(!response.ok) {\n        throw new Error(response.statusText);\n    }\n    return await response.json();\n}\n\nfetchData(BASE_URL)\n    .then(todos => container.insertAdjacentHTML(\"beforeend\", createMarkup(todos)))\n    .catch(error => console.log(error))\n\nfunction createMarkup(arr) {\n    return arr.map(({ id, title, completed }) => `\n        <li data-id=\"${id}\" class=\"list__item\">\n            <input type=\"checkbox\" class=\"list__checkbox\" ${completed && \"checked\"}>\n            <h2 class=\"list__title\">${title}</h2>\n            <button class=\"list__btn\">x</button>\n        </li>\n    `).join(\"\")\n}\n\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n\n    const { todo } = event.currentTarget.elements;\n    \n    fetchData(BASE_URL, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ title: todo.value, completed: false })\n    })\n        .then(data => container.insertAdjacentHTML(\"beforeend\", createMarkup([data])))\n        .catch(error => alert(error))\n        .finally(() => form.reset())\n}\n\nfunction handleUpdate(event) {\n    if(!event.target.classList.contains(\"list__checkbox\")) {\n        return;\n    }\n    event.preventDefault();\n    \n    const parent = event.target.closest(\".list__item\");\n    const id = parent.dataset.id;\n    \n    fetchData(`${BASE_URL}/${id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify({ completed: event.target.checked })\n    })\n        .then(data => event.target.checked = data.completed)\n        .catch(error => console.log(error))\n}\n\n\nfunction handleDelete(event) {\n    if(!event.target.classList.contains(\"list__btn\")) {\n        return;\n    }\n    \n    const parent = event.target.closest(\".list__item\");\n    const id = parent.dataset.id;\n    \n    fetchData(`${BASE_URL}/${id}`, {\n        method: \"DELETE\"\n    })\n        .then(data => parent.remove())\n        .catch(error => alert(error))\n\n}"],"names":["BASE_URL","form","container","handleSubmit","handleUpdate","handleDelete","fetchData","url","options","response","todos","createMarkup","error","arr","id","title","completed","event","todo","data","parent"],"mappings":"oCAEA,MAAMA,EAAW,8BAEXC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAEhDD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAGhD,eAAeC,EAAUC,EAAKC,EAAU,GAAI,CACxC,MAAMC,EAAW,MAAM,MAAMF,EAAKC,CAAO,EACzC,GAAG,CAACC,EAAS,GACT,MAAM,IAAI,MAAMA,EAAS,UAAU,EAEvC,OAAO,MAAMA,EAAS,MAC1B,CAEAH,EAAUN,CAAQ,EACb,KAAKU,GAASR,EAAU,mBAAmB,YAAaS,EAAaD,CAAK,CAAC,CAAC,EAC5E,MAAME,GAAS,QAAQ,IAAIA,CAAK,CAAC,EAEtC,SAASD,EAAaE,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,CAAS,IAAO;AAAA,uBAC1BF,CAAE;AAAA,4DACmCE,GAAa,SAAS;AAAA,sCAC5CD,CAAK;AAAA;AAAA;AAAA,KAGtC,EAAE,KAAK,EAAE,CACd,CAGA,SAASZ,EAAac,EAAO,CACzBA,EAAM,eAAc,EAEpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,cAAc,SAErCX,EAAUN,EAAU,CAChB,OAAQ,OACR,QAAS,CACL,eAAgB,kBACnB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOkB,EAAK,MAAO,UAAW,GAAO,CACpE,CAAK,EACI,KAAKC,GAAQjB,EAAU,mBAAmB,YAAaS,EAAa,CAACQ,CAAI,CAAC,CAAC,CAAC,EAC5E,MAAMP,GAAS,MAAMA,CAAK,CAAC,EAC3B,QAAQ,IAAMX,EAAK,OAAO,CACnC,CAEA,SAASG,EAAaa,EAAO,CACzB,GAAG,CAACA,EAAM,OAAO,UAAU,SAAS,gBAAgB,EAChD,OAEJA,EAAM,eAAc,EAGpB,MAAMH,EADSG,EAAM,OAAO,QAAQ,aAAa,EAC/B,QAAQ,GAE1BX,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CAC3B,OAAQ,QACR,KAAM,KAAK,UAAU,CAAE,UAAWG,EAAM,OAAO,QAAS,CAChE,CAAK,EACI,KAAKE,GAAQF,EAAM,OAAO,QAAUE,EAAK,SAAS,EAClD,MAAMP,GAAS,QAAQ,IAAIA,CAAK,CAAC,CAC1C,CAGA,SAASP,EAAaY,EAAO,CACzB,GAAG,CAACA,EAAM,OAAO,UAAU,SAAS,WAAW,EAC3C,OAGJ,MAAMG,EAASH,EAAM,OAAO,QAAQ,aAAa,EAC3CH,EAAKM,EAAO,QAAQ,GAE1Bd,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CAC3B,OAAQ,QAChB,CAAK,EACI,KAAKK,GAAQC,EAAO,QAAQ,EAC5B,MAAMR,GAAS,MAAMA,CAAK,CAAC,CAEpC"}