{"version":3,"file":"commonHelpers.js","sources":["../src/12-23-lesson.js"],"sourcesContent":["import axios from 'axios';\nimport './css/styles.css';\n\n// to run localhost use: npm start\n\nconst BASE_URL = 'http://localhost:3000/todos';\n\nconst form = document.querySelector('.todo-form');\nconst container = document.querySelector('.list');\n\nform.addEventListener('submit', handleSubmit);\ncontainer.addEventListener('click', handleUpdate);\ncontainer.addEventListener('click', handleDelete);\n\nrender();\n\nasync function serviceTodos(options = {}) {\n  const { data } = await axios(options);\n  return data;\n}\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ id, title, completed }) =>\n        `<li class=\"list-item\" data-id=\"${id}\">\n          <input type=\"checkbox\" class=\"list-checkbox\" ${\n            completed && 'checked'\n          }>\n          <h2 class=\"list-title\">${title}</h2>\n          <button class=\"list-btn\">x</button>\n        </li> `\n    )\n    .join('');\n}\n\nasync function render() {\n  try {\n    const todos = await serviceTodos({ url: BASE_URL });\n    container.insertAdjacentHTML('beforeend', createMarkup(todos));\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  const { todo } = event.target.elements;\n  console.log(todo.value);\n\n  try {\n    const data = await serviceTodos({\n      method: 'POST',\n      url: BASE_URL,\n      data: {\n        title: todo.value,\n        completed: false,\n      },\n    });\n    container.insertAdjacentHTML('beforeend', createMarkup([data]));\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleUpdate(event) {\n  if (!event.target.classList.contains('list-checkbox')) {\n    return;\n  }\n  event.preventDefault();\nconsole.log(event.target.checked);\n\n  const parent = event.target.closest('.list-item');\n  // console.log(parent);\n  const id = parent.dataset.id;\n  // console.log(id);\n  try {\n    const done = await serviceTodos({\n        url: `${BASE_URL}/${id}`,\n        method: 'PATCH',\n        data: {\n            completed: event.target.checked\n        }\n        });\n        // console.log('done', done);\n        event.target.checked = done.completed;\n  } catch(error) {\n    alert(error.message)\n  }\n}\n\nasync function handleDelete(event) {\n    if(!event.target.classList.contains('list-btn')) {\n        return;\n    }\n    // console.log('ok');\n\n    const parent = event.target.closest('.list-item');\n    const id = parent.dataset.id;\n    // console.log(id);\n    try {\n        await serviceTodos({\n            url: `${BASE_URL}/${id}`,\n            method: 'DELETE'\n        })\n    } catch(error) {\n        alert(error.message);\n    }\n}\n\n\n\n\n\n\n"],"names":["BASE_URL","form","container","handleSubmit","handleUpdate","handleDelete","render","serviceTodos","options","data","axios","createMarkup","arr","id","title","completed","todos","error","event","todo","done"],"mappings":"wIAKA,MAAMA,EAAW,8BAEXC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAY,SAAS,cAAc,OAAO,EAEhDD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAEhDC,IAEA,eAAeC,EAAaC,EAAU,GAAI,CACxC,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAMF,CAAO,EACpC,OAAOC,CACT,CACA,SAASE,EAAaC,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,CAAW,IACvB,kCAAkCF,CAAE;AAAA,yDAEhCE,GAAa,SACd;AAAA,mCACwBD,CAAK;AAAA;AAAA,eAGnC,EACA,KAAK,EAAE,CACZ,CAEA,eAAeR,GAAS,CACtB,GAAI,CACF,MAAMU,EAAQ,MAAMT,EAAa,CAAE,IAAKP,CAAU,CAAA,EAClDE,EAAU,mBAAmB,YAAaS,EAAaK,CAAK,CAAC,CAC9D,OAAQC,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACH,CAEA,eAAed,EAAae,EAAO,CACjCA,EAAM,eAAc,EAEpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,OAAO,SAC9B,QAAQ,IAAIC,EAAK,KAAK,EAEtB,GAAI,CACF,MAAMV,EAAO,MAAMF,EAAa,CAC9B,OAAQ,OACR,IAAKP,EACL,KAAM,CACJ,MAAOmB,EAAK,MACZ,UAAW,EACZ,CACP,CAAK,EACDjB,EAAU,mBAAmB,YAAaS,EAAa,CAACF,CAAI,CAAC,CAAC,CAC/D,OAAQQ,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRhB,EAAK,MAAK,CACX,CACH,CAEA,eAAeG,EAAac,EAAO,CACjC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,eAAe,EAClD,OAEFA,EAAM,eAAc,EACtB,QAAQ,IAAIA,EAAM,OAAO,OAAO,EAI9B,MAAML,EAFSK,EAAM,OAAO,QAAQ,YAAY,EAE9B,QAAQ,GAE1B,GAAI,CACF,MAAME,EAAO,MAAMb,EAAa,CAC5B,IAAK,GAAGP,CAAQ,IAAIa,CAAE,GACtB,OAAQ,QACR,KAAM,CACF,UAAWK,EAAM,OAAO,OAC3B,CACT,CAAS,EAEDA,EAAM,OAAO,QAAUE,EAAK,SACjC,OAAOH,EAAO,CACb,MAAMA,EAAM,OAAO,CACpB,CACH,CAEA,eAAeZ,EAAaa,EAAO,CAC/B,GAAG,CAACA,EAAM,OAAO,UAAU,SAAS,UAAU,EAC1C,OAKJ,MAAML,EADSK,EAAM,OAAO,QAAQ,YAAY,EAC9B,QAAQ,GAE1B,GAAI,CACA,MAAMX,EAAa,CACf,IAAK,GAAGP,CAAQ,IAAIa,CAAE,GACtB,OAAQ,QACpB,CAAS,CACJ,OAAOI,EAAO,CACX,MAAMA,EAAM,OAAO,CACtB,CACL"}